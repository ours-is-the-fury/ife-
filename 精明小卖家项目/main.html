<html>

<head>
    <meta charset="UTF-8">
    <title>IFE ECMAScript</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div id="region-radio-wrapper">
        <input type="checkbox" name="region" value="华东" >华东
        <input type="checkbox" name="region" value="华南" >华南
        <input type="checkbox" name="region" value="华北">华北
        <input type="checkbox" name="region" value="全选">全选
        <br/>
        <input type="checkbox" name="product" value="手机" >手机
        <input type="checkbox" name="product" value="笔记本" >笔记本
        <input type="checkbox" name="product" value="智能音箱">智能音箱
        <input type="checkbox" name="product" value="全选">全选
        <button type="button" id="btn">生成图表</button>
    </div>
    <div id="product-radio-wrapper">
        <table border="1" align="center" width="800PX" id="table">
            <thead>
                <tr id="headlist">
                    <th>商品</th>
                    <th>地区</th>
                    <th>1月</th>
                    <th>2月</th>
                    <th>3月</th>
                    <th>4月</th>
                    <th>5月</th>
                    <th>6月</th>
                    <th>7月</th>
                    <th>8月</th>
                    <th>9月</th>
                    <th>10月</th>
                    <th>11月</th>
                    <th>12月</th>
                </tr>
            </thead>
            </table>
    </div>
    <script>
        let sourceData = [{
            product: "手机",
            region: "华东",
            sale: [120, 100, 140, 160, 180, 185, 190, 210, 230, 245, 255, 270]
        }, {
            product: "手机",
            region: "华北",
            sale: [80, 70, 90, 110, 130, 145, 150, 160, 170, 185, 190, 200]
        }, {
            product: "手机",
            region: "华南",
            sale: [220, 200, 240, 250, 260, 270, 280, 295, 310, 335, 355, 380]
        }, {
            product: "笔记本",
            region: "华东",
            sale: [50, 60, 80, 110, 30, 20, 70, 30, 420, 30, 20, 20]
        }, {
            product: "笔记本",
            region: "华北",
            sale: [30, 35, 50, 70, 20, 15, 30, 50, 710, 130, 20, 20]
        }, {
            product: "笔记本",
            region: "华南",
            sale: [80, 120, 130, 140, 70, 75, 120, 90, 550, 120, 110, 100]
        }, {
            product: "智能音箱",
            region: "华东",
            sale: [10, 30, 4, 5, 6, 5, 4, 5, 6, 5, 5, 25]
        }, {
            product: "智能音箱",
            region: "华北",
            sale: [15, 50, 15, 15, 12, 11, 11, 12, 12, 14, 12, 40]
        }, {
            product: "智能音箱",
            region: "华南",
            sale: [10, 40, 10, 6, 5, 6, 8, 6, 6, 6, 7, 26]
        }];

        var btn = document.getElementById("btn");
        var region = document.getElementsByName("region");
        var product = document.getElementsByName("product");
        var arr2 = new Array;
        var table = document.getElementById("table");
       
        btn.addEventListener('click', function (){

            console.log(table.childNodes[3]!=undefined)
            choose()
            maketable()
           
        })
        function choose() {
            var i
            var n
            arr2.splice(0,arr2.length);
            for (i = 0; i < 3; i++) {
                if (region[i].checked) {
                    for (n = 0; n < 3; n++) {
                        if (product[n].checked) {
                            arr2.push(finddate(product[n].value, region[i].value))                           
                        }
                    }

                } 

            }

        }

        function finddate(product, region) {
            var arr1 = [product, region]
            for (var i = 0; i < 9; i++) {
                if (sourceData[i].region == region && sourceData[i].product == product) {
                    arr1 = arr1.concat(sourceData[i].sale)
                   
                }
            }
            return arr1//返回数据
        }

        function maketable() {
            var tbody = document.createElement("tbody");
            var i;
            var n; 
            table.appendChild(tbody);
            for (i = 0; i < arr2.length; i++) {
                var tr = new Array;
                tr[i] = document.createElement("tr");
                tbody.appendChild(tr[i]);
                for (n = 0; n < 14; n++) {
                    var td = new Array;//创建td
                    td[n] = document.createElement("td");    
                    tr[i].appendChild(td[n]);                      
                    td[n].innerHTML = arr2[i][n];
                }
            }
        }
        function cleartable(){
            var tbs=document.getElementsByTagName('tbody'); 
            console.log(tbs)
            if(tbs.length=1){
                table.removeChild(tbs[0]);  
        }}

        /*var region = document.getElementsByName("region")
        var product = document.getElementsByName("product")
        function regionall() {
            for (i = 0; i < 4; i++) {
                region[i].checked = "checked";
            }
        }
        function productall() {
            for (i = 0; i < 4; i++) {
                region[i].checked = "checked";
            }
        }

        region[1].onclick = function sing() {
            var flag;
            if (this.checked) {
                this.checked = "checked"
            }
            for (i = 0; i < 3; i++) {
                if (region[i].checked) {
                    flag = flag + 1
                    console.log(flag)
                }
            }
            if (flag == 3) {
                region[4].checked = "checked"
            }else{
                region[4].checked = ""
            }
        }*/
        


    </script>
</body>
</html>